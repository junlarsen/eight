---
source: compiler/hachi-syntax/tests/parser_tests.rs
expression: translation_unit
input_file: compiler/hachi-syntax/tests/data/fma.test
snapshot_kind: text
---
TranslationUnit(
  id: NodeId(0),
  span: Span(
    low: 0,
    high: 0,
  ),
  items: [
    Type(TypeItem(
      id: NodeId(7),
      span: Span(
        low: 0,
        high: 29,
      ),
      name: Identifier(
        id: NodeId(1),
        name: "vec512",
        span: Span(
          low: 5,
          high: 11,
        ),
      ),
      members: [
        TypeMemberItem(
          id: NodeId(6),
          span: Span(
            low: 18,
            high: 27,
          ),
          name: Identifier(
            id: NodeId(2),
            name: "vs",
            span: Span(
              low: 18,
              high: 20,
            ),
          ),
          type: Pointer(PointerType(
            id: NodeId(5),
            span: Span(
              low: 22,
              high: 26,
            ),
            inner: Integer32(Integer32Type(
              id: NodeId(4),
              span: Span(
                low: 23,
                high: 26,
              ),
            )),
          )),
        ),
      ],
    )),
    Function(FunctionItem(
      id: NodeId(88),
      span: Span(
        low: 31,
        high: 253,
      ),
      name: Identifier(
        id: NodeId(8),
        name: "vec512_fma",
        span: Span(
          low: 34,
          high: 44,
        ),
      ),
      parameters: [
        FunctionParameterItem(
          id: NodeId(12),
          span: Span(
            low: 45,
            high: 54,
          ),
          name: Identifier(
            id: NodeId(9),
            name: "x",
            span: Span(
              low: 45,
              high: 46,
            ),
          ),
          type: Named(NamedType(
            id: NodeId(11),
            span: Span(
              low: 48,
              high: 54,
            ),
            name: Identifier(
              id: NodeId(10),
              name: "vec512",
              span: Span(
                low: 48,
                high: 54,
              ),
            ),
          )),
        ),
        FunctionParameterItem(
          id: NodeId(16),
          span: Span(
            low: 56,
            high: 65,
          ),
          name: Identifier(
            id: NodeId(13),
            name: "y",
            span: Span(
              low: 56,
              high: 57,
            ),
          ),
          type: Named(NamedType(
            id: NodeId(15),
            span: Span(
              low: 59,
              high: 65,
            ),
            name: Identifier(
              id: NodeId(14),
              name: "vec512",
              span: Span(
                low: 59,
                high: 65,
              ),
            ),
          )),
        ),
        FunctionParameterItem(
          id: NodeId(20),
          span: Span(
            low: 67,
            high: 78,
          ),
          name: Identifier(
            id: NodeId(17),
            name: "acc",
            span: Span(
              low: 67,
              high: 70,
            ),
          ),
          type: Named(NamedType(
            id: NodeId(19),
            span: Span(
              low: 72,
              high: 78,
            ),
            name: Identifier(
              id: NodeId(18),
              name: "vec512",
              span: Span(
                low: 72,
                high: 78,
              ),
            ),
          )),
        ),
      ],
      type_parameters: [],
      return_type: Some(Named(NamedType(
        id: NodeId(22),
        span: Span(
          low: 82,
          high: 88,
        ),
        name: Identifier(
          id: NodeId(21),
          name: "vec512",
          span: Span(
            low: 82,
            high: 88,
          ),
        ),
      ))),
      body: [
        Let(LetStmt(
          id: NodeId(35),
          span: Span(
            low: 93,
            high: 144,
          ),
          name: Identifier(
            id: NodeId(23),
            name: "vs",
            span: Span(
              low: 97,
              high: 99,
            ),
          ),
          type: None,
          value: Construct(ConstructExpr(
            id: NodeId(34),
            span: Span(
              low: 102,
              high: 143,
            ),
            callee: Named(NamedType(
              id: NodeId(25),
              span: Span(
                low: 106,
                high: 112,
              ),
              name: Identifier(
                id: NodeId(24),
                name: "vec512",
                span: Span(
                  low: 106,
                  high: 112,
                ),
              ),
            )),
            arguments: [
              ConstructorExprArgument(
                id: NodeId(33),
                span: Span(
                  low: 119,
                  high: 138,
                ),
                field: Identifier(
                  id: NodeId(26),
                  name: "vs",
                  span: Span(
                    low: 119,
                    high: 121,
                  ),
                ),
                expr: Call(CallExpr(
                  id: NodeId(32),
                  span: Span(
                    low: 123,
                    high: 138,
                  ),
                  callee: Reference(ReferenceExpr(
                    id: NodeId(28),
                    span: Span(
                      low: 123,
                      high: 129,
                    ),
                    name: Identifier(
                      id: NodeId(27),
                      name: "malloc",
                      span: Span(
                        low: 123,
                        high: 129,
                      ),
                    ),
                  )),
                  arguments: [
                    BinaryOp(BinaryOpExpr(
                      id: NodeId(31),
                      span: Span(
                        low: 130,
                        high: 137,
                      ),
                      lhs: IntegerLiteral(IntegerLiteralExpr(
                        id: NodeId(29),
                        span: Span(
                          low: 130,
                          high: 133,
                        ),
                        value: 512,
                      )),
                      rhs: IntegerLiteral(IntegerLiteralExpr(
                        id: NodeId(30),
                        span: Span(
                          low: 136,
                          high: 137,
                        ),
                        value: 4,
                      )),
                      op: Div,
                    )),
                  ],
                  type_arguments: [],
                )),
              ),
            ],
          )),
        )),
        For(ForStmt(
          id: NodeId(84),
          span: Span(
            low: 147,
            high: 238,
          ),
          initializer: Some(ForStmtInitializer(
            id: NodeId(38),
            span: Span(
              low: 152,
              high: 161,
            ),
            name: Identifier(
              id: NodeId(36),
              name: "i",
              span: Span(
                low: 156,
                high: 157,
              ),
            ),
            initializer: IntegerLiteral(IntegerLiteralExpr(
              id: NodeId(37),
              span: Span(
                low: 160,
                high: 161,
              ),
              value: 0,
            )),
          )),
          condition: Some(BinaryOp(BinaryOpExpr(
            id: NodeId(44),
            span: Span(
              low: 163,
              high: 174,
            ),
            lhs: Reference(ReferenceExpr(
              id: NodeId(40),
              span: Span(
                low: 163,
                high: 164,
              ),
              name: Identifier(
                id: NodeId(39),
                name: "i",
                span: Span(
                  low: 163,
                  high: 164,
                ),
              ),
            )),
            rhs: BinaryOp(BinaryOpExpr(
              id: NodeId(43),
              span: Span(
                low: 167,
                high: 174,
              ),
              lhs: IntegerLiteral(IntegerLiteralExpr(
                id: NodeId(41),
                span: Span(
                  low: 167,
                  high: 170,
                ),
                value: 512,
              )),
              rhs: IntegerLiteral(IntegerLiteralExpr(
                id: NodeId(42),
                span: Span(
                  low: 173,
                  high: 174,
                ),
                value: 4,
              )),
              op: Div,
            )),
            op: Lt,
          ))),
          increment: Some(Assign(AssignExpr(
            id: NodeId(51),
            span: Span(
              low: 176,
              high: 185,
            ),
            lhs: Reference(ReferenceExpr(
              id: NodeId(46),
              span: Span(
                low: 176,
                high: 177,
              ),
              name: Identifier(
                id: NodeId(45),
                name: "i",
                span: Span(
                  low: 176,
                  high: 177,
                ),
              ),
            )),
            rhs: BinaryOp(BinaryOpExpr(
              id: NodeId(50),
              span: Span(
                low: 180,
                high: 185,
              ),
              lhs: Reference(ReferenceExpr(
                id: NodeId(48),
                span: Span(
                  low: 180,
                  high: 181,
                ),
                name: Identifier(
                  id: NodeId(47),
                  name: "i",
                  span: Span(
                    low: 180,
                    high: 181,
                  ),
                ),
              )),
              rhs: IntegerLiteral(IntegerLiteralExpr(
                id: NodeId(49),
                span: Span(
                  low: 184,
                  high: 185,
                ),
                value: 1,
              )),
              op: Add,
            )),
          ))),
          body: [
            Expr(ExprStmt(
              id: NodeId(83),
              span: Span(
                low: 193,
                high: 234,
              ),
              expr: Assign(AssignExpr(
                id: NodeId(82),
                span: Span(
                  low: 193,
                  high: 233,
                ),
                lhs: BracketIndex(BracketIndexExpr(
                  id: NodeId(58),
                  span: Span(
                    low: 193,
                    high: 201,
                  ),
                  origin: DotIndex(DotIndexExpr(
                    id: NodeId(55),
                    span: Span(
                      low: 193,
                      high: 198,
                    ),
                    origin: Reference(ReferenceExpr(
                      id: NodeId(53),
                      span: Span(
                        low: 193,
                        high: 195,
                      ),
                      name: Identifier(
                        id: NodeId(52),
                        name: "vs",
                        span: Span(
                          low: 193,
                          high: 195,
                        ),
                      ),
                    )),
                    index: Identifier(
                      id: NodeId(54),
                      name: "vs",
                      span: Span(
                        low: 196,
                        high: 198,
                      ),
                    ),
                  )),
                  index: Reference(ReferenceExpr(
                    id: NodeId(57),
                    span: Span(
                      low: 199,
                      high: 200,
                    ),
                    name: Identifier(
                      id: NodeId(56),
                      name: "i",
                      span: Span(
                        low: 199,
                        high: 200,
                      ),
                    ),
                  )),
                )),
                rhs: BinaryOp(BinaryOpExpr(
                  id: NodeId(81),
                  span: Span(
                    low: 204,
                    high: 233,
                  ),
                  lhs: BinaryOp(BinaryOpExpr(
                    id: NodeId(73),
                    span: Span(
                      low: 204,
                      high: 221,
                    ),
                    lhs: BracketIndex(BracketIndexExpr(
                      id: NodeId(65),
                      span: Span(
                        low: 204,
                        high: 211,
                      ),
                      origin: DotIndex(DotIndexExpr(
                        id: NodeId(62),
                        span: Span(
                          low: 204,
                          high: 208,
                        ),
                        origin: Reference(ReferenceExpr(
                          id: NodeId(60),
                          span: Span(
                            low: 204,
                            high: 205,
                          ),
                          name: Identifier(
                            id: NodeId(59),
                            name: "x",
                            span: Span(
                              low: 204,
                              high: 205,
                            ),
                          ),
                        )),
                        index: Identifier(
                          id: NodeId(61),
                          name: "vs",
                          span: Span(
                            low: 206,
                            high: 208,
                          ),
                        ),
                      )),
                      index: Reference(ReferenceExpr(
                        id: NodeId(64),
                        span: Span(
                          low: 209,
                          high: 210,
                        ),
                        name: Identifier(
                          id: NodeId(63),
                          name: "i",
                          span: Span(
                            low: 209,
                            high: 210,
                          ),
                        ),
                      )),
                    )),
                    rhs: BracketIndex(BracketIndexExpr(
                      id: NodeId(72),
                      span: Span(
                        low: 214,
                        high: 221,
                      ),
                      origin: DotIndex(DotIndexExpr(
                        id: NodeId(69),
                        span: Span(
                          low: 214,
                          high: 218,
                        ),
                        origin: Reference(ReferenceExpr(
                          id: NodeId(67),
                          span: Span(
                            low: 214,
                            high: 215,
                          ),
                          name: Identifier(
                            id: NodeId(66),
                            name: "y",
                            span: Span(
                              low: 214,
                              high: 215,
                            ),
                          ),
                        )),
                        index: Identifier(
                          id: NodeId(68),
                          name: "vs",
                          span: Span(
                            low: 216,
                            high: 218,
                          ),
                        ),
                      )),
                      index: Reference(ReferenceExpr(
                        id: NodeId(71),
                        span: Span(
                          low: 219,
                          high: 220,
                        ),
                        name: Identifier(
                          id: NodeId(70),
                          name: "i",
                          span: Span(
                            low: 219,
                            high: 220,
                          ),
                        ),
                      )),
                    )),
                    op: Mul,
                  )),
                  rhs: BracketIndex(BracketIndexExpr(
                    id: NodeId(80),
                    span: Span(
                      low: 224,
                      high: 233,
                    ),
                    origin: DotIndex(DotIndexExpr(
                      id: NodeId(77),
                      span: Span(
                        low: 224,
                        high: 230,
                      ),
                      origin: Reference(ReferenceExpr(
                        id: NodeId(75),
                        span: Span(
                          low: 224,
                          high: 227,
                        ),
                        name: Identifier(
                          id: NodeId(74),
                          name: "acc",
                          span: Span(
                            low: 224,
                            high: 227,
                          ),
                        ),
                      )),
                      index: Identifier(
                        id: NodeId(76),
                        name: "vs",
                        span: Span(
                          low: 228,
                          high: 230,
                        ),
                      ),
                    )),
                    index: Reference(ReferenceExpr(
                      id: NodeId(79),
                      span: Span(
                        low: 231,
                        high: 232,
                      ),
                      name: Identifier(
                        id: NodeId(78),
                        name: "i",
                        span: Span(
                          low: 231,
                          high: 232,
                        ),
                      ),
                    )),
                  )),
                  op: Add,
                )),
              )),
            )),
          ],
        )),
        Return(ReturnStmt(
          id: NodeId(87),
          span: Span(
            low: 241,
            high: 251,
          ),
          value: Some(Reference(ReferenceExpr(
            id: NodeId(86),
            span: Span(
              low: 248,
              high: 250,
            ),
            name: Identifier(
              id: NodeId(85),
              name: "vs",
              span: Span(
                low: 248,
                high: 250,
              ),
            ),
          ))),
        )),
      ],
    )),
  ],
)
